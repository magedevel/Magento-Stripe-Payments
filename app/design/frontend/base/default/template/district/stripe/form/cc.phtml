<?php

/**
 * District Commerce
 *
 * @category    District
 * @package     Stripe
 * @author      District Commerce <support@districtcommerce.com>
 * @copyright   District Commerce (http://districtcommerce.com)
 * 
 */
?>

<style>
  #payment_form_stripe .has-error input {
    border-color: #f00;
  }
</style>

<div class="form-list" id="payment_form_<?php echo $this->getMethodCode() ?>" style="display:none;">
  <input type="hidden" name="stripeToken" id="stripe-token">
  <div id="stripe-error-messages"></div>
  <ol>
    <li>
      <label for="stripe-card-number">Card Number</label>
      <input id="stripe-card-number" type="tel" x-autocompletetype="cc-number" autocompletetype="cc-number" autocorrect="off" spellcheck="off" autocapitalize="off" placeholder="Card number" data-stripe="number" size="20">
    </li>
    <li class="float">
      <label for="stripe-cc-exp">Expiry Date</label>
      <input id="stripe-cc-exp" type="tel" x-autocompletetype="off" autocompletetype="off" autocorrect="off" spellcheck="off" autocapitalize="off" placeholder="MM / YY" size="5" data-stripe="exp">
    </li>
    <li class="float">
      <label for="stripe-cc-cvc">CVC</label>
      <input id="stripe-cc-cvc" type="tel" autocomplete="off" autocorrect="off" spellcheck="off" autocapitalize="off" placeholder="CVC" data-stripe="cvc" size="4" maxlength="4">
    </li>
  </ol>
</div>

<script>

Stripe.setPublishableKey('<?php echo Mage::getStoreConfig('payment/stripe/api_publishable_key'); ?>');
  
(function() {
  
  var scripts = document.getElementsByTagName('script'),
      districtStripeAdded = false,
      districtStripeSrc = '<?php echo Mage::getBaseUrl('js') . 'district/stripe/stripe.js'; ?>';
  
  for (var i=0;i<scripts.length;i++) {
    if(scripts[i].src == districtStripeSrc) {
      districtStripeAdded = true;
    }
  }
  
  if (!districtStripeAdded) {
    var head = document.getElementsByTagName('head')[0];
    var script = document.createElement('script');
    script.src = districtStripeSrc;
    head.appendChild(script);
  }
  
})();
  
</script>